<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_45) on Thu Oct 29 15:17:52 IST 2020 -->
<TITLE>
ActiveRouter
</TITLE>

<META NAME="date" CONTENT="2020-10-29">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="ActiveRouter";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;PREV CLASS&nbsp;
&nbsp;<A HREF="../routing/DirectDeliveryRouter.html" title="class in routing"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../index.html?routing/ActiveRouter.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="ActiveRouter.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
routing</FONT>
<BR>
Class ActiveRouter</H2>
<PRE>
java.lang.Object
  <IMG SRC="../resources/inherit.gif" ALT="extended by "><A HREF="../routing/MessageRouter.html" title="class in routing">routing.MessageRouter</A>
      <IMG SRC="../resources/inherit.gif" ALT="extended by "><B>routing.ActiveRouter</B>
</PRE>
<DL>
<DT><B>Direct Known Subclasses:</B> <DD><A HREF="../routing/DirectDeliveryRouter.html" title="class in routing">DirectDeliveryRouter</A>, <A HREF="../routing/EpidemicOracleRouter.html" title="class in routing">EpidemicOracleRouter</A>, <A HREF="../routing/EpidemicRouter.html" title="class in routing">EpidemicRouter</A>, <A HREF="../routing/FirstContactRouter.html" title="class in routing">FirstContactRouter</A>, <A HREF="../routing/LifeRouter.html" title="class in routing">LifeRouter</A>, <A HREF="../routing/MaxPropRouter.html" title="class in routing">MaxPropRouter</A>, <A HREF="../routing/MaxPropRouterWithEstimation.html" title="class in routing">MaxPropRouterWithEstimation</A>, <A HREF="../routing/ProphetRouter.html" title="class in routing">ProphetRouter</A>, <A HREF="../routing/ProphetRouterWithEstimation.html" title="class in routing">ProphetRouterWithEstimation</A>, <A HREF="../routing/ProphetV2Router.html" title="class in routing">ProphetV2Router</A>, <A HREF="../routing/SprayAndWaitRouter.html" title="class in routing">SprayAndWaitRouter</A>, <A HREF="../routing/TestRouting.html" title="class in routing">TestRouting</A>, <A HREF="../routing/WaveRouter.html" title="class in routing">WaveRouter</A></DD>
</DL>
<HR>
<DL>
<DT><PRE>public abstract class <B>ActiveRouter</B><DT>extends <A HREF="../routing/MessageRouter.html" title="class in routing">MessageRouter</A></DL>
</PRE>

<P>
Superclass of active routers. Contains convenience methods (e.g. 
 <A HREF="../routing/ActiveRouter.html#getNextMessageToRemove(boolean)"><CODE>getNextMessageToRemove(boolean)</CODE></A>) and watching of sending connections (see
 <A HREF="../routing/ActiveRouter.html#update()"><CODE>update()</CODE></A>).
<P>

<P>
<HR>

<P>
<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Field Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../routing/ActiveRouter.html#DELETE_DELIVERED_S">DELETE_DELIVERED_S</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Delete delivered messages -setting id ("deleteDelivered").</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../routing/ActiveRouter.html#deleteDelivered">deleteDelivered</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;should messages that final recipient marks as delivered be deleted
 from message buffer</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../routing/ActiveRouter.html#RESPONSE_PREFIX">RESPONSE_PREFIX</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prefix of all response message IDs</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;java.util.ArrayList&lt;<A HREF="../core/Connection.html" title="class in core">Connection</A>&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../routing/ActiveRouter.html#sendingConnections">sendingConnections</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;connection(s) that are currently used for sending</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../routing/ActiveRouter.html#TTL_CHECK_INTERVAL">TTL_CHECK_INTERVAL</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;how often TTL check (discarding old messages) is performed</TD>
</TR>
</TABLE>
&nbsp;<A NAME="fields_inherited_from_class_routing.MessageRouter"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Fields inherited from class routing.<A HREF="../routing/MessageRouter.html" title="class in routing">MessageRouter</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="../routing/MessageRouter.html#B_SIZE_S">B_SIZE_S</A>, <A HREF="../routing/MessageRouter.html#DENIED_LOW_RESOURCES">DENIED_LOW_RESOURCES</A>, <A HREF="../routing/MessageRouter.html#DENIED_NO_SPACE">DENIED_NO_SPACE</A>, <A HREF="../routing/MessageRouter.html#DENIED_OLD">DENIED_OLD</A>, <A HREF="../routing/MessageRouter.html#DENIED_POLICY">DENIED_POLICY</A>, <A HREF="../routing/MessageRouter.html#DENIED_TTL">DENIED_TTL</A>, <A HREF="../routing/MessageRouter.html#DENIED_UNSPECIFIED">DENIED_UNSPECIFIED</A>, <A HREF="../routing/MessageRouter.html#MSG_TTL_S">MSG_TTL_S</A>, <A HREF="../routing/MessageRouter.html#msgTtl">msgTtl</A>, <A HREF="../routing/MessageRouter.html#Q_MODE_FIFO">Q_MODE_FIFO</A>, <A HREF="../routing/MessageRouter.html#Q_MODE_RANDOM">Q_MODE_RANDOM</A>, <A HREF="../routing/MessageRouter.html#RCV_OK">RCV_OK</A>, <A HREF="../routing/MessageRouter.html#SEND_QUEUE_MODE_S">SEND_QUEUE_MODE_S</A>, <A HREF="../routing/MessageRouter.html#TRY_LATER_BUSY">TRY_LATER_BUSY</A></CODE></TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected </CODE></FONT></TD>
<TD><CODE><B><A HREF="../routing/ActiveRouter.html#ActiveRouter(routing.ActiveRouter)">ActiveRouter</A></B>(<A HREF="../routing/ActiveRouter.html" title="class in routing">ActiveRouter</A>&nbsp;r)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Copy constructor.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../routing/ActiveRouter.html#ActiveRouter(core.Settings)">ActiveRouter</A></B>(<A HREF="../core/Settings.html" title="class in core">Settings</A>&nbsp;s)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Constructor.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../routing/ActiveRouter.html#addToSendingConnections(core.Connection)">addToSendingConnections</A></B>(<A HREF="../core/Connection.html" title="class in core">Connection</A>&nbsp;con)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Adds a connections to sending connections which are monitored in
 the update.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../routing/ActiveRouter.html#canStartTransfer()">canStartTransfer</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Makes rudimentary checks (that we have at least one message and one
 connection) about can this router start transfer.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../routing/ActiveRouter.html#changedConnection(core.Connection)">changedConnection</A></B>(<A HREF="../core/Connection.html" title="class in core">Connection</A>&nbsp;con)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Called when a connection's state changes.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../routing/ActiveRouter.html#checkReceiving(core.Message, core.DTNHost)">checkReceiving</A></B>(<A HREF="../core/Message.html" title="class in core">Message</A>&nbsp;m,
               <A HREF="../core/DTNHost.html" title="class in core">DTNHost</A>&nbsp;from)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Checks if router "wants" to start receiving message (i.e.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../routing/ActiveRouter.html#createNewMessage(core.Message)">createNewMessage</A></B>(<A HREF="../core/Message.html" title="class in core">Message</A>&nbsp;m)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Creates a new message to the router.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../routing/ActiveRouter.html#dropExpiredMessages()">dropExpiredMessages</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Drops messages whose TTL is less than zero.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;<A HREF="../core/Connection.html" title="class in core">Connection</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../routing/ActiveRouter.html#exchangeDeliverableMessages()">exchangeDeliverableMessages</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Exchanges deliverable (to final recipient) messages between this host
 and all hosts this host is currently connected to.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;java.util.List&lt;<A HREF="../core/Connection.html" title="class in core">Connection</A>&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../routing/ActiveRouter.html#getConnections()">getConnections</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns a list of connections this host currently has with other hosts.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;java.util.List&lt;util.Tuple&lt;<A HREF="../core/Message.html" title="class in core">Message</A>,<A HREF="../core/Connection.html" title="class in core">Connection</A>&gt;&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../routing/ActiveRouter.html#getMessagesForConnected()">getMessagesForConnected</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns a list of message-connections tuples of the messages whose
 recipient is some host that we're connected to at the moment.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;<A HREF="../core/Message.html" title="class in core">Message</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../routing/ActiveRouter.html#getNextMessageToRemove(boolean)">getNextMessageToRemove</A></B>(boolean&nbsp;excludeMsgBeingSent)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the oldest (by receive time) message in the message buffer 
 (that is not being sent if excludeMsgBeingSent is true).</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../routing/util/RoutingInfo.html" title="class in routing.util">RoutingInfo</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../routing/ActiveRouter.html#getRoutingInfo()">getRoutingInfo</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns routing information about this router.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../routing/ActiveRouter.html#hasEnergy()">hasEnergy</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns true if the node has energy left (i.e., energy modeling is
 enabled OR (is enabled and model has energy left))</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../routing/ActiveRouter.html#init(core.DTNHost, java.util.List)">init</A></B>(<A HREF="../core/DTNHost.html" title="class in core">DTNHost</A>&nbsp;host,
     java.util.List&lt;<A HREF="../core/MessageListener.html" title="interface in core">MessageListener</A>&gt;&nbsp;mListeners)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Initializes the router; i.e.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../routing/ActiveRouter.html#isSending(java.lang.String)">isSending</A></B>(java.lang.String&nbsp;msgId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns true if this router is currently sending a message with 
 <CODE>msgId</CODE>.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../routing/ActiveRouter.html#isTransferring()">isTransferring</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns true if this router is transferring something at the moment or
 some transfer has not been finalized.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../routing/ActiveRouter.html#makeRoomForMessage(int)">makeRoomForMessage</A></B>(int&nbsp;size)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Removes messages from the buffer (oldest first) until
 there's enough space for the new message.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../routing/ActiveRouter.html#makeRoomForNewMessage(int)">makeRoomForNewMessage</A></B>(int&nbsp;size)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Tries to make room for a new message.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../core/Message.html" title="class in core">Message</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../routing/ActiveRouter.html#messageTransferred(java.lang.String, core.DTNHost)">messageTransferred</A></B>(java.lang.String&nbsp;id,
                   <A HREF="../core/DTNHost.html" title="class in core">DTNHost</A>&nbsp;from)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method should be called (on the receiving host) after a message
 was successfully transferred.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../routing/ActiveRouter.html#receiveMessage(core.Message, core.DTNHost)">receiveMessage</A></B>(<A HREF="../core/Message.html" title="class in core">Message</A>&nbsp;m,
               <A HREF="../core/DTNHost.html" title="class in core">DTNHost</A>&nbsp;from)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Try to start receiving a message from another host.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../routing/ActiveRouter.html#requestDeliverableMessages(core.Connection)">requestDeliverableMessages</A></B>(<A HREF="../core/Connection.html" title="class in core">Connection</A>&nbsp;con)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Requests for deliverable message from this router to be sent trough a
 connection.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../routing/ActiveRouter.html#shuffleMessages(java.util.List)">shuffleMessages</A></B>(java.util.List&lt;<A HREF="../core/Message.html" title="class in core">Message</A>&gt;&nbsp;messages)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Shuffles a messages list so the messages are in random order.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../routing/ActiveRouter.html#startTransfer(core.Message, core.Connection)">startTransfer</A></B>(<A HREF="../core/Message.html" title="class in core">Message</A>&nbsp;m,
              <A HREF="../core/Connection.html" title="class in core">Connection</A>&nbsp;con)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Tries to start a transfer of message using a connection.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../routing/ActiveRouter.html#transferAborted(core.Connection)">transferAborted</A></B>(<A HREF="../core/Connection.html" title="class in core">Connection</A>&nbsp;con)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Method is called just before a transfer is aborted at <A HREF="../routing/ActiveRouter.html#update()"><CODE>update()</CODE></A> 
 due connection going down.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../routing/ActiveRouter.html#transferDone(core.Connection)">transferDone</A></B>(<A HREF="../core/Connection.html" title="class in core">Connection</A>&nbsp;con)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Method is called just before a transfer is finalized 
 at <A HREF="../routing/ActiveRouter.html#update()"><CODE>update()</CODE></A>.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;<A HREF="../core/Message.html" title="class in core">Message</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../routing/ActiveRouter.html#tryAllMessages(core.Connection, java.util.List)">tryAllMessages</A></B>(<A HREF="../core/Connection.html" title="class in core">Connection</A>&nbsp;con,
               java.util.List&lt;<A HREF="../core/Message.html" title="class in core">Message</A>&gt;&nbsp;messages)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Goes trough the messages until the other node accepts one
 for receiving (or doesn't accept any).</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;<A HREF="../core/Connection.html" title="class in core">Connection</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../routing/ActiveRouter.html#tryAllMessagesToAllConnections()">tryAllMessagesToAllConnections</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Tries to send all messages that this router is carrying to all
 connections this node has.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;util.Tuple&lt;<A HREF="../core/Message.html" title="class in core">Message</A>,<A HREF="../core/Connection.html" title="class in core">Connection</A>&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../routing/ActiveRouter.html#tryMessagesForConnected(java.util.List)">tryMessagesForConnected</A></B>(java.util.List&lt;util.Tuple&lt;<A HREF="../core/Message.html" title="class in core">Message</A>,<A HREF="../core/Connection.html" title="class in core">Connection</A>&gt;&gt;&nbsp;tuples)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Tries to send messages for the connections that are mentioned
 in the Tuples in the order they are in the list until one of
 the connections starts transferring or all tuples have been tried.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;<A HREF="../core/Connection.html" title="class in core">Connection</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../routing/ActiveRouter.html#tryMessagesToConnections(java.util.List, java.util.List)">tryMessagesToConnections</A></B>(java.util.List&lt;<A HREF="../core/Message.html" title="class in core">Message</A>&gt;&nbsp;messages,
                         java.util.List&lt;<A HREF="../core/Connection.html" title="class in core">Connection</A>&gt;&nbsp;connections)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Tries to send all given messages to all given connections.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../routing/ActiveRouter.html#update()">update</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Checks out all sending connections to finalize the ready ones 
 and abort those whose connection went down.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_routing.MessageRouter"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class routing.<A HREF="../routing/MessageRouter.html" title="class in routing">MessageRouter</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="../routing/MessageRouter.html#addApplication(core.Application)">addApplication</A>, <A HREF="../routing/MessageRouter.html#addToMessages(core.Message, boolean)">addToMessages</A>, <A HREF="../routing/MessageRouter.html#compareByQueueMode(core.Message, core.Message)">compareByQueueMode</A>, <A HREF="../routing/MessageRouter.html#deleteMessage(java.lang.String, boolean)">deleteMessage</A>, <A HREF="../routing/MessageRouter.html#getApplications(java.lang.String)">getApplications</A>, <A HREF="../routing/MessageRouter.html#getBufferSize()">getBufferSize</A>, <A HREF="../routing/MessageRouter.html#getFreeBufferSize()">getFreeBufferSize</A>, <A HREF="../routing/MessageRouter.html#getHost()">getHost</A>, <A HREF="../routing/MessageRouter.html#getMessage(java.lang.String)">getMessage</A>, <A HREF="../routing/MessageRouter.html#getMessageCollection()">getMessageCollection</A>, <A HREF="../routing/MessageRouter.html#getNrofMessages()">getNrofMessages</A>, <A HREF="../routing/MessageRouter.html#hasMessage(java.lang.String)">hasMessage</A>, <A HREF="../routing/MessageRouter.html#isBlacklistedMessage(java.lang.String)">isBlacklistedMessage</A>, <A HREF="../routing/MessageRouter.html#isDeliveredMessage(core.Message)">isDeliveredMessage</A>, <A HREF="../routing/MessageRouter.html#isIncomingMessage(java.lang.String)">isIncomingMessage</A>, <A HREF="../routing/MessageRouter.html#messageAborted(java.lang.String, core.DTNHost, int)">messageAborted</A>, <A HREF="../routing/MessageRouter.html#putToIncomingBuffer(core.Message, core.DTNHost)">putToIncomingBuffer</A>, <A HREF="../routing/MessageRouter.html#removeFromIncomingBuffer(java.lang.String, core.DTNHost)">removeFromIncomingBuffer</A>, <A HREF="../routing/MessageRouter.html#removeFromMessages(java.lang.String)">removeFromMessages</A>, <A HREF="../routing/MessageRouter.html#replicate()">replicate</A>, <A HREF="../routing/MessageRouter.html#sendMessage(java.lang.String, core.DTNHost)">sendMessage</A>, <A HREF="../routing/MessageRouter.html#sortByQueueMode(java.util.List)">sortByQueueMode</A>, <A HREF="../routing/MessageRouter.html#toString()">toString</A></CODE></TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.Object</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, finalize, getClass, hashCode, notify, notifyAll, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->

<A NAME="field_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Field Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="DELETE_DELIVERED_S"><!-- --></A><H3>
DELETE_DELIVERED_S</H3>
<PRE>
public static final java.lang.String <B>DELETE_DELIVERED_S</B></PRE>
<DL>
<DD>Delete delivered messages -setting id ("deleteDelivered"). Boolean valued.
 If set to true and final recipient of a message rejects it because it
 already has it, the message is deleted from buffer. Default=false.
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../constant-values.html#routing.ActiveRouter.DELETE_DELIVERED_S">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="deleteDelivered"><!-- --></A><H3>
deleteDelivered</H3>
<PRE>
protected boolean <B>deleteDelivered</B></PRE>
<DL>
<DD>should messages that final recipient marks as delivered be deleted
 from message buffer
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="RESPONSE_PREFIX"><!-- --></A><H3>
RESPONSE_PREFIX</H3>
<PRE>
public static final java.lang.String <B>RESPONSE_PREFIX</B></PRE>
<DL>
<DD>prefix of all response message IDs
<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../constant-values.html#routing.ActiveRouter.RESPONSE_PREFIX">Constant Field Values</A></DL>
</DL>
<HR>

<A NAME="TTL_CHECK_INTERVAL"><!-- --></A><H3>
TTL_CHECK_INTERVAL</H3>
<PRE>
public static int <B>TTL_CHECK_INTERVAL</B></PRE>
<DL>
<DD>how often TTL check (discarding old messages) is performed
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="sendingConnections"><!-- --></A><H3>
sendingConnections</H3>
<PRE>
protected java.util.ArrayList&lt;<A HREF="../core/Connection.html" title="class in core">Connection</A>&gt; <B>sendingConnections</B></PRE>
<DL>
<DD>connection(s) that are currently used for sending
<P>
<DL>
</DL>
</DL>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="ActiveRouter(core.Settings)"><!-- --></A><H3>
ActiveRouter</H3>
<PRE>
public <B>ActiveRouter</B>(<A HREF="../core/Settings.html" title="class in core">Settings</A>&nbsp;s)</PRE>
<DL>
<DD>Constructor. Creates a new message router based on the settings in
 the given Settings object.
<P>
<DL>
<DT><B>Parameters:</B><DD><CODE>s</CODE> - The settings object</DL>
</DL>
<HR>

<A NAME="ActiveRouter(routing.ActiveRouter)"><!-- --></A><H3>
ActiveRouter</H3>
<PRE>
protected <B>ActiveRouter</B>(<A HREF="../routing/ActiveRouter.html" title="class in routing">ActiveRouter</A>&nbsp;r)</PRE>
<DL>
<DD>Copy constructor.
<P>
<DL>
<DT><B>Parameters:</B><DD><CODE>r</CODE> - The router prototype where setting values are copied from</DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="init(core.DTNHost, java.util.List)"><!-- --></A><H3>
init</H3>
<PRE>
public void <B>init</B>(<A HREF="../core/DTNHost.html" title="class in core">DTNHost</A>&nbsp;host,
                 java.util.List&lt;<A HREF="../core/MessageListener.html" title="interface in core">MessageListener</A>&gt;&nbsp;mListeners)</PRE>
<DL>
<DD><B>Description copied from class: <CODE><A HREF="../routing/MessageRouter.html#init(core.DTNHost, java.util.List)">MessageRouter</A></CODE></B></DD>
<DD>Initializes the router; i.e. sets the host this router is in and
 message listeners that need to be informed about message related
 events etc.
<P>
<DD><DL>
<DT><B>Overrides:</B><DD><CODE><A HREF="../routing/MessageRouter.html#init(core.DTNHost, java.util.List)">init</A></CODE> in class <CODE><A HREF="../routing/MessageRouter.html" title="class in routing">MessageRouter</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>host</CODE> - The host this router is in<DD><CODE>mListeners</CODE> - The message listeners</DL>
</DD>
</DL>
<HR>

<A NAME="changedConnection(core.Connection)"><!-- --></A><H3>
changedConnection</H3>
<PRE>
public void <B>changedConnection</B>(<A HREF="../core/Connection.html" title="class in core">Connection</A>&nbsp;con)</PRE>
<DL>
<DD>Called when a connection's state changes. If energy modeling is enabled,
 and a new connection is created to this node, reduces the energy for the
 device discovery (scan response) amount
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../routing/MessageRouter.html#changedConnection(core.Connection)">changedConnection</A></CODE> in class <CODE><A HREF="../routing/MessageRouter.html" title="class in routing">MessageRouter</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>@con</CODE> - The connection whose state changed</DL>
</DD>
</DL>
<HR>

<A NAME="requestDeliverableMessages(core.Connection)"><!-- --></A><H3>
requestDeliverableMessages</H3>
<PRE>
public boolean <B>requestDeliverableMessages</B>(<A HREF="../core/Connection.html" title="class in core">Connection</A>&nbsp;con)</PRE>
<DL>
<DD><B>Description copied from class: <CODE><A HREF="../routing/MessageRouter.html#requestDeliverableMessages(core.Connection)">MessageRouter</A></CODE></B></DD>
<DD>Requests for deliverable message from this router to be sent trough a
 connection.
<P>
<DD><DL>
<DT><B>Overrides:</B><DD><CODE><A HREF="../routing/MessageRouter.html#requestDeliverableMessages(core.Connection)">requestDeliverableMessages</A></CODE> in class <CODE><A HREF="../routing/MessageRouter.html" title="class in routing">MessageRouter</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>con</CODE> - The connection to send the messages trough
<DT><B>Returns:</B><DD>True if this router started a transfer, false if not</DL>
</DD>
</DL>
<HR>

<A NAME="createNewMessage(core.Message)"><!-- --></A><H3>
createNewMessage</H3>
<PRE>
public boolean <B>createNewMessage</B>(<A HREF="../core/Message.html" title="class in core">Message</A>&nbsp;m)</PRE>
<DL>
<DD><B>Description copied from class: <CODE><A HREF="../routing/MessageRouter.html#createNewMessage(core.Message)">MessageRouter</A></CODE></B></DD>
<DD>Creates a new message to the router.
<P>
<DD><DL>
<DT><B>Overrides:</B><DD><CODE><A HREF="../routing/MessageRouter.html#createNewMessage(core.Message)">createNewMessage</A></CODE> in class <CODE><A HREF="../routing/MessageRouter.html" title="class in routing">MessageRouter</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>m</CODE> - The message to create
<DT><B>Returns:</B><DD>True if the creation succeeded, false if not (e.g.
 the message was too big for the buffer)</DL>
</DD>
</DL>
<HR>

<A NAME="receiveMessage(core.Message, core.DTNHost)"><!-- --></A><H3>
receiveMessage</H3>
<PRE>
public int <B>receiveMessage</B>(<A HREF="../core/Message.html" title="class in core">Message</A>&nbsp;m,
                          <A HREF="../core/DTNHost.html" title="class in core">DTNHost</A>&nbsp;from)</PRE>
<DL>
<DD><B>Description copied from class: <CODE><A HREF="../routing/MessageRouter.html#receiveMessage(core.Message, core.DTNHost)">MessageRouter</A></CODE></B></DD>
<DD>Try to start receiving a message from another host.
<P>
<DD><DL>
<DT><B>Overrides:</B><DD><CODE><A HREF="../routing/MessageRouter.html#receiveMessage(core.Message, core.DTNHost)">receiveMessage</A></CODE> in class <CODE><A HREF="../routing/MessageRouter.html" title="class in routing">MessageRouter</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>m</CODE> - Message to put in the receiving buffer<DD><CODE>from</CODE> - Who the message is from
<DT><B>Returns:</B><DD>Value zero if the node accepted the message (RCV_OK), value less
 than zero if node rejected the message (e.g. DENIED_OLD), value bigger
 than zero if the other node should try later (e.g. TRY_LATER_BUSY).</DL>
</DD>
</DL>
<HR>

<A NAME="messageTransferred(java.lang.String, core.DTNHost)"><!-- --></A><H3>
messageTransferred</H3>
<PRE>
public <A HREF="../core/Message.html" title="class in core">Message</A> <B>messageTransferred</B>(java.lang.String&nbsp;id,
                                  <A HREF="../core/DTNHost.html" title="class in core">DTNHost</A>&nbsp;from)</PRE>
<DL>
<DD><B>Description copied from class: <CODE><A HREF="../routing/MessageRouter.html#messageTransferred(java.lang.String, core.DTNHost)">MessageRouter</A></CODE></B></DD>
<DD>This method should be called (on the receiving host) after a message
 was successfully transferred. The transferred message is put to the
 message buffer unless this host is the final recipient of the message.
<P>
<DD><DL>
<DT><B>Overrides:</B><DD><CODE><A HREF="../routing/MessageRouter.html#messageTransferred(java.lang.String, core.DTNHost)">messageTransferred</A></CODE> in class <CODE><A HREF="../routing/MessageRouter.html" title="class in routing">MessageRouter</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>id</CODE> - Id of the transferred message<DD><CODE>from</CODE> - Host the message was from (previous hop)
<DT><B>Returns:</B><DD>The message that this host received</DL>
</DD>
</DL>
<HR>

<A NAME="getConnections()"><!-- --></A><H3>
getConnections</H3>
<PRE>
protected java.util.List&lt;<A HREF="../core/Connection.html" title="class in core">Connection</A>&gt; <B>getConnections</B>()</PRE>
<DL>
<DD>Returns a list of connections this host currently has with other hosts.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>a list of connections this host currently has with other hosts</DL>
</DD>
</DL>
<HR>

<A NAME="startTransfer(core.Message, core.Connection)"><!-- --></A><H3>
startTransfer</H3>
<PRE>
protected int <B>startTransfer</B>(<A HREF="../core/Message.html" title="class in core">Message</A>&nbsp;m,
                            <A HREF="../core/Connection.html" title="class in core">Connection</A>&nbsp;con)</PRE>
<DL>
<DD>Tries to start a transfer of message using a connection. Is starting
 succeeds, the connection is added to the watch list of active connections
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>m</CODE> - The message to transfer<DD><CODE>con</CODE> - The connection to use
<DT><B>Returns:</B><DD>the value returned by 
 <A HREF="../core/Connection.html#startTransfer(core.DTNHost, core.Message)"><CODE>Connection.startTransfer(DTNHost, Message)</CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="canStartTransfer()"><!-- --></A><H3>
canStartTransfer</H3>
<PRE>
protected boolean <B>canStartTransfer</B>()</PRE>
<DL>
<DD>Makes rudimentary checks (that we have at least one message and one
 connection) about can this router start transfer.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>True if router can start transfer, false if not</DL>
</DD>
</DL>
<HR>

<A NAME="checkReceiving(core.Message, core.DTNHost)"><!-- --></A><H3>
checkReceiving</H3>
<PRE>
protected int <B>checkReceiving</B>(<A HREF="../core/Message.html" title="class in core">Message</A>&nbsp;m,
                             <A HREF="../core/DTNHost.html" title="class in core">DTNHost</A>&nbsp;from)</PRE>
<DL>
<DD>Checks if router "wants" to start receiving message (i.e. router 
 isn't transferring, doesn't have the message and has room for it).
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>m</CODE> - The message to check
<DT><B>Returns:</B><DD>A return code similar to 
 <A HREF="../routing/MessageRouter.html#receiveMessage(core.Message, core.DTNHost)"><CODE>MessageRouter.receiveMessage(Message, DTNHost)</CODE></A>, i.e. 
 <A HREF="../routing/MessageRouter.html#RCV_OK"><CODE>MessageRouter.RCV_OK</CODE></A> if receiving seems to be OK, 
 TRY_LATER_BUSY if router is transferring, DENIED_OLD if the router
 is already carrying the message or it has been delivered to
 this router (as final recipient), or DENIED_NO_SPACE if the message
 does not fit into buffer</DL>
</DD>
</DL>
<HR>

<A NAME="makeRoomForMessage(int)"><!-- --></A><H3>
makeRoomForMessage</H3>
<PRE>
protected boolean <B>makeRoomForMessage</B>(int&nbsp;size)</PRE>
<DL>
<DD>Removes messages from the buffer (oldest first) until
 there's enough space for the new message.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>size</CODE> - Size of the new message 
 transferred, the transfer is aborted before message is removed
<DT><B>Returns:</B><DD>True if enough space could be freed, false if not</DL>
</DD>
</DL>
<HR>

<A NAME="dropExpiredMessages()"><!-- --></A><H3>
dropExpiredMessages</H3>
<PRE>
protected void <B>dropExpiredMessages</B>()</PRE>
<DL>
<DD>Drops messages whose TTL is less than zero.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="makeRoomForNewMessage(int)"><!-- --></A><H3>
makeRoomForNewMessage</H3>
<PRE>
protected void <B>makeRoomForNewMessage</B>(int&nbsp;size)</PRE>
<DL>
<DD>Tries to make room for a new message. Current implementation simply
 calls <A HREF="../routing/ActiveRouter.html#makeRoomForMessage(int)"><CODE>makeRoomForMessage(int)</CODE></A> and ignores the return value.
 Therefore, if the message can't fit into buffer, the buffer is only 
 cleared from messages that are not being sent.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>size</CODE> - Size of the new message</DL>
</DD>
</DL>
<HR>

<A NAME="getNextMessageToRemove(boolean)"><!-- --></A><H3>
getNextMessageToRemove</H3>
<PRE>
protected <A HREF="../core/Message.html" title="class in core">Message</A> <B>getNextMessageToRemove</B>(boolean&nbsp;excludeMsgBeingSent)</PRE>
<DL>
<DD>Returns the oldest (by receive time) message in the message buffer 
 (that is not being sent if excludeMsgBeingSent is true).
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>excludeMsgBeingSent</CODE> - If true, excludes message(s) that are
 being sent from the oldest message check (i.e. if oldest message is
 being sent, the second oldest message is returned)
<DT><B>Returns:</B><DD>The oldest message or null if no message could be returned
 (no messages in buffer or all messages in buffer are being sent and
 exludeMsgBeingSent is true)</DL>
</DD>
</DL>
<HR>

<A NAME="getMessagesForConnected()"><!-- --></A><H3>
getMessagesForConnected</H3>
<PRE>
protected java.util.List&lt;util.Tuple&lt;<A HREF="../core/Message.html" title="class in core">Message</A>,<A HREF="../core/Connection.html" title="class in core">Connection</A>&gt;&gt; <B>getMessagesForConnected</B>()</PRE>
<DL>
<DD>Returns a list of message-connections tuples of the messages whose
 recipient is some host that we're connected to at the moment.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>a list of message-connections tuples</DL>
</DD>
</DL>
<HR>

<A NAME="tryMessagesForConnected(java.util.List)"><!-- --></A><H3>
tryMessagesForConnected</H3>
<PRE>
protected util.Tuple&lt;<A HREF="../core/Message.html" title="class in core">Message</A>,<A HREF="../core/Connection.html" title="class in core">Connection</A>&gt; <B>tryMessagesForConnected</B>(java.util.List&lt;util.Tuple&lt;<A HREF="../core/Message.html" title="class in core">Message</A>,<A HREF="../core/Connection.html" title="class in core">Connection</A>&gt;&gt;&nbsp;tuples)</PRE>
<DL>
<DD>Tries to send messages for the connections that are mentioned
 in the Tuples in the order they are in the list until one of
 the connections starts transferring or all tuples have been tried.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>tuples</CODE> - The tuples to try
<DT><B>Returns:</B><DD>The tuple whose connection accepted the message or null if
 none of the connections accepted the message that was meant for them.</DL>
</DD>
</DL>
<HR>

<A NAME="tryAllMessages(core.Connection, java.util.List)"><!-- --></A><H3>
tryAllMessages</H3>
<PRE>
protected <A HREF="../core/Message.html" title="class in core">Message</A> <B>tryAllMessages</B>(<A HREF="../core/Connection.html" title="class in core">Connection</A>&nbsp;con,
                                 java.util.List&lt;<A HREF="../core/Message.html" title="class in core">Message</A>&gt;&nbsp;messages)</PRE>
<DL>
<DD>Goes trough the messages until the other node accepts one
 for receiving (or doesn't accept any). If a transfer is started, the
 connection is included in the list of sending connections.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>con</CODE> - Connection trough which the messages are sent<DD><CODE>messages</CODE> - A list of messages to try
<DT><B>Returns:</B><DD>The message whose transfer was started or null if no 
 transfer was started.</DL>
</DD>
</DL>
<HR>

<A NAME="tryMessagesToConnections(java.util.List, java.util.List)"><!-- --></A><H3>
tryMessagesToConnections</H3>
<PRE>
protected <A HREF="../core/Connection.html" title="class in core">Connection</A> <B>tryMessagesToConnections</B>(java.util.List&lt;<A HREF="../core/Message.html" title="class in core">Message</A>&gt;&nbsp;messages,
                                              java.util.List&lt;<A HREF="../core/Connection.html" title="class in core">Connection</A>&gt;&nbsp;connections)</PRE>
<DL>
<DD>Tries to send all given messages to all given connections. Connections
 are first iterated in the order they are in the list and for every
 connection, the messages are tried in the order they are in the list.
 Once an accepting connection is found, no other connections or messages
 are tried.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>messages</CODE> - The list of Messages to try<DD><CODE>connections</CODE> - The list of Connections to try
<DT><B>Returns:</B><DD>The connections that started a transfer or null if no connection
 accepted a message.</DL>
</DD>
</DL>
<HR>

<A NAME="tryAllMessagesToAllConnections()"><!-- --></A><H3>
tryAllMessagesToAllConnections</H3>
<PRE>
protected <A HREF="../core/Connection.html" title="class in core">Connection</A> <B>tryAllMessagesToAllConnections</B>()</PRE>
<DL>
<DD>Tries to send all messages that this router is carrying to all
 connections this node has. Messages are ordered using the 
 <A HREF="../routing/MessageRouter.html#sortByQueueMode(java.util.List)"><CODE>MessageRouter.sortByQueueMode(List)</CODE></A>. See 
 <A HREF="../routing/ActiveRouter.html#tryMessagesToConnections(java.util.List, java.util.List)"><CODE>tryMessagesToConnections(List, List)</CODE></A> for sending details.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>The connections that started a transfer or null if no connection
 accepted a message.</DL>
</DD>
</DL>
<HR>

<A NAME="exchangeDeliverableMessages()"><!-- --></A><H3>
exchangeDeliverableMessages</H3>
<PRE>
protected <A HREF="../core/Connection.html" title="class in core">Connection</A> <B>exchangeDeliverableMessages</B>()</PRE>
<DL>
<DD>Exchanges deliverable (to final recipient) messages between this host
 and all hosts this host is currently connected to. First all messages
 from this host are checked and then all other hosts are asked for
 messages to this host. If a transfer is started, the search ends.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>A connection that started a transfer or null if no transfer
 was started</DL>
</DD>
</DL>
<HR>

<A NAME="shuffleMessages(java.util.List)"><!-- --></A><H3>
shuffleMessages</H3>
<PRE>
protected void <B>shuffleMessages</B>(java.util.List&lt;<A HREF="../core/Message.html" title="class in core">Message</A>&gt;&nbsp;messages)</PRE>
<DL>
<DD>Shuffles a messages list so the messages are in random order.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>messages</CODE> - The list to sort and shuffle</DL>
</DD>
</DL>
<HR>

<A NAME="addToSendingConnections(core.Connection)"><!-- --></A><H3>
addToSendingConnections</H3>
<PRE>
protected void <B>addToSendingConnections</B>(<A HREF="../core/Connection.html" title="class in core">Connection</A>&nbsp;con)</PRE>
<DL>
<DD>Adds a connections to sending connections which are monitored in
 the update.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>con</CODE> - The connection to add<DT><B>See Also:</B><DD><A HREF="../routing/ActiveRouter.html#update()"><CODE>update()</CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="isTransferring()"><!-- --></A><H3>
isTransferring</H3>
<PRE>
public boolean <B>isTransferring</B>()</PRE>
<DL>
<DD>Returns true if this router is transferring something at the moment or
 some transfer has not been finalized.
<P>
<DD><DL>

<DT><B>Returns:</B><DD>true if this router is transferring something</DL>
</DD>
</DL>
<HR>

<A NAME="isSending(java.lang.String)"><!-- --></A><H3>
isSending</H3>
<PRE>
public boolean <B>isSending</B>(java.lang.String&nbsp;msgId)</PRE>
<DL>
<DD>Returns true if this router is currently sending a message with 
 <CODE>msgId</CODE>.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>msgId</CODE> - The ID of the message
<DT><B>Returns:</B><DD>True if the message is being sent false if not</DL>
</DD>
</DL>
<HR>

<A NAME="hasEnergy()"><!-- --></A><H3>
hasEnergy</H3>
<PRE>
public boolean <B>hasEnergy</B>()</PRE>
<DL>
<DD>Returns true if the node has energy left (i.e., energy modeling is
 enabled OR (is enabled and model has energy left))
<P>
<DD><DL>

<DT><B>Returns:</B><DD>has the node energy</DL>
</DD>
</DL>
<HR>

<A NAME="update()"><!-- --></A><H3>
update</H3>
<PRE>
public void <B>update</B>()</PRE>
<DL>
<DD>Checks out all sending connections to finalize the ready ones 
 and abort those whose connection went down. Also drops messages
 whose TTL <= 0 (checking every one simulated minute).
<P>
<DD><DL>
<DT><B>Overrides:</B><DD><CODE><A HREF="../routing/MessageRouter.html#update()">update</A></CODE> in class <CODE><A HREF="../routing/MessageRouter.html" title="class in routing">MessageRouter</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>See Also:</B><DD><A HREF="../routing/ActiveRouter.html#addToSendingConnections(core.Connection)"><CODE>addToSendingConnections(Connection)</CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="transferAborted(core.Connection)"><!-- --></A><H3>
transferAborted</H3>
<PRE>
protected void <B>transferAborted</B>(<A HREF="../core/Connection.html" title="class in core">Connection</A>&nbsp;con)</PRE>
<DL>
<DD>Method is called just before a transfer is aborted at <A HREF="../routing/ActiveRouter.html#update()"><CODE>update()</CODE></A> 
 due connection going down. This happens on the sending host. 
 Subclasses that are interested of the event may want to override this.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>con</CODE> - The connection whose transfer was aborted</DL>
</DD>
</DL>
<HR>

<A NAME="transferDone(core.Connection)"><!-- --></A><H3>
transferDone</H3>
<PRE>
protected void <B>transferDone</B>(<A HREF="../core/Connection.html" title="class in core">Connection</A>&nbsp;con)</PRE>
<DL>
<DD>Method is called just before a transfer is finalized 
 at <A HREF="../routing/ActiveRouter.html#update()"><CODE>update()</CODE></A>.
 Subclasses that are interested of the event may want to override this.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>con</CODE> - The connection whose transfer was finalized</DL>
</DD>
</DL>
<HR>

<A NAME="getRoutingInfo()"><!-- --></A><H3>
getRoutingInfo</H3>
<PRE>
public <A HREF="../routing/util/RoutingInfo.html" title="class in routing.util">RoutingInfo</A> <B>getRoutingInfo</B>()</PRE>
<DL>
<DD><B>Description copied from class: <CODE><A HREF="../routing/MessageRouter.html#getRoutingInfo()">MessageRouter</A></CODE></B></DD>
<DD>Returns routing information about this router.
<P>
<DD><DL>
<DT><B>Overrides:</B><DD><CODE><A HREF="../routing/MessageRouter.html#getRoutingInfo()">getRoutingInfo</A></CODE> in class <CODE><A HREF="../routing/MessageRouter.html" title="class in routing">MessageRouter</A></CODE></DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>The routing information.</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;PREV CLASS&nbsp;
&nbsp;<A HREF="../routing/DirectDeliveryRouter.html" title="class in routing"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../index.html?routing/ActiveRouter.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="ActiveRouter.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
